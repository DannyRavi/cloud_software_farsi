با جایگزین کردن تدریجی بخش‌های خاصی از توابع و قسمت های مهم و عملیاتی برنامه قدیمی با برنامه‌ها و سرویس‌های جدید، یک سیستم قدیمی را به تدریج به سیستم جدیدتر تبدیل کنید. همانطور که ویژگی‌های سیستم قدیمی جایگزین می‌شوند، سیستم جدید در نهایت جایگزین همه ویژگی‌های سیستم قدیمی می‌شود، سیستم قدیمی را تضعیف می‌کند و به شما امکان می‌دهد آن را از کار بیندازید.

## **طرح صورت مسئله:**

با افزایش سن سیستم ها، ابزارهای توسعه، فناوری میزبانی و حتی معماری سیستمی که بر اساس آنها ساخته شده‌اند، می توانند به طور فزاینده ای منسوخ شوند. با اضافه شدن ویژگی ها و عملکردهای جدید، پیچیدگی این برنامه ها می تواند به طور چشمگیری افزایش یابد و نگهداری یا افزودن ویژگی های جدید به آنها سخت‌تر شود.

جایگزینی کامل یک سیستم پیچیده می تواند کار بزرگی باشد. اغلب، شما نیاز به انتقال تدریجی به یک سیستم جدید دارید، در حالی که سیستم قدیمی را برای کنترل ویژگی‌هایی که هنوز منتقل نشده‌اند حفظ می کنید. با این حال، اجرای دو نسخه جداگانه از یک برنامه به این معنی است که مشتریان باید بدانند ویژگی های خاص در کجا قرار دارند. هر بار که یک ویژگی یا سرویس منتقل می شود، مشتریان باید برای اشاره به مکان جدید باید به روز رسانی شوند.
## راه حل

به طور تدریجی بخش های خاصی از توابع و قسمت‌های عملیاتی مهم را با برنامه ها و سرویس‌های جدید جایگزین کنید. یک نما یا [façade](https://en.wikipedia.org/wiki/Facade_pattern) ایجاد کنید که requestهایی را که به سیستم قدیمی backend  می‌روند را رهگیری کند. façade این درخواست ها را یا به برنامه قدیمی یا سرویس‌های جدید هدایت(route) می کند. ویژگی‌های موجود را می‌توان به تدریج به سیستم جدید منتقل کرد و مصرف‌کنندگان می‌توانند به استفاده از همان رابط یا interface ادامه دهند، غافل از اینکه متوجه بشوند که هرگونه تغییر یا [migrate](https://en.wikipedia.org/wiki/Data_migration) صورت گرفته است.

![[Pasted image 20230908145614.png]]


این الگو کمک می کند تا خطر migrate به حداقل برسد و تلاش  برای توسعه نرم‌افزار در طول زمان پخش شود. از آنجایی که façade کاربران را به طور ایمن به برنامه صحیح هدایت می کند، می توانید با هر سرعتی که دوست دارید عملکردی را به سیستم جدید اضافه کنید و در عین حال اطمینان حاصل کنید که برنامه قدیمی به کار خود ادامه می دهد. با گذشت زمان، با انتقال ویژگی ها به سیستم جدید، سیستم قدیمی در نهایت 'خفه(strangled)' می شود و دیگر ضروری نیست. پس از تکمیل این فرآیند، سیستم قدیمی می تواند با خیال راحت بازنشسته شود.

## مسائل و ملاحظات:

نحوه مدیریت سرویس‌ها و ذخیره‌های داده‌ای که به طور بالقوه توسط سیستم‌های جدید و قدیمی استفاده می‌شوند را در نظر بگیرید. مطمئن شوید که هر دو می‌توانند در کنار هم به این منابع دسترسی داشته باشند.


از این الگو هنگام انتقال تدریجی یک برنامه back-end به یک معماری جدید استفاده کنید.  
  
این الگو ممکن است مناسب نباشد:  
  
* زمانی که درخواست‌ها به سیستم back-end قابل رهگیری نباشد.  
* برای سیستم های کوچکتر که پیچیدگی تعویض به سیستم جدید بسیار کم است.
## قدم بعدی

- [Pattern: Backends For Frontends](https://samnewman.io/patterns/architectural/bff/)


## منابع مرتبطت

- [Gateway Aggregation pattern](https://learn.microsoft.com/en-us/azure/architecture/patterns/gateway-aggregation)
- [Gateway Offloading pattern](https://learn.microsoft.com/en-us/azure/architecture/patterns/gateway-offloading)
- [Gateway Routing pattern](https://learn.microsoft.com/en-us/azure/architecture/patterns/gateway-routing)